import{r as l,j as t,R as I}from"./index-Cv0NU7IO.js";import{I as M,C as O,a as R,V as H}from"./Version-DgUi3lBz.js";const z=()=>{const[o,y]=l.useState("playing"),[m,b]=l.useState(0),[S,u]=l.useState(""),[d,j]=l.useState(()=>{const e=new Date;return e.setHours(0,0,0,0),e}),[i,g]=l.useState(Array(4).fill().map(()=>Array(4).fill(0))),[N,w]=l.useState(Array(4).fill().map(()=>Array(4).fill(0))),[T,D]=l.useState(()=>{const e=localStorage.getItem("gamesShowInstructions");return e===null?!0:JSON.parse(e)}),[p,h]=l.useState(!1),f=e=>{let s=e.getFullYear()*1e4+(e.getMonth()+1)*100+e.getDate();const a=()=>(s=s*16807%2147483647,(s-1)/2147483646),n=Array(4).fill().map(()=>Array(4).fill(0));let r=0;for(;r<3;){const c=Math.floor(a()*4),A=Math.floor(a()*4);n[c][A]===0&&(n[c][A]=1,r++)}return n},[x,v]=l.useState(f(d)),F=e=>{const s=new Date(e.target.value);j(s),v(f(s)),$()},C=l.useCallback(()=>{if(o!=="playing"||p)return;h(!0);let e=0;const s=[];for(let n=0;n<4;n++)for(let r=0;r<4;r++)i[n][r]===4&&(s.push([n,r]),x[n][r]===1&&e++);const a=[...i].map(n=>[...n]);setTimeout(()=>{h(!1),b(r=>r+1);const n=[...N].map(r=>[...r]);s.forEach(([r,c])=>{e===3?(y("complete"),u(`Congratulations, you solved TILES for ${d.toLocaleDateString()} in ${m+1} ${m===0?"attempt":"attempts"}!`)):e===0?(a[r][c]=1,n[r][c]=1):(a[r][c]=3,n[r][c]=3)}),w(n),g(a),e>0&&e<3?u(`${e} out of 3 squares are correct!`):e===0&&u("None of these squares are correct.")},650)},[o,i,x,m,d,p]);l.useEffect(()=>{(()=>{i.flat().filter(a=>a===4).length===3&&o==="playing"&&C()})()},[i,o,C]);const E=(e,s)=>{if(o!=="playing")return;const a=[...i];if(a[e]=[...a[e]],a[e][s]===4)a[e][s]=N[e][s];else{if(a.flat().filter(r=>r===4).length>=3){u("You can only select 3 squares at a time");return}a[e][s]=4}g(a),u("")},$=()=>{y("playing"),g(Array(4).fill().map(()=>Array(4).fill(0))),w(Array(4).fill().map(()=>Array(4).fill(0))),u(""),b(0),h(!1)},Y=()=>{const e=new Date(d);e.setDate(e.getDate()-1),j(e),v(f(e)),$()},q=e=>{switch(e){case 1:return"bg-gray-300";case 3:return"bg-yellow-300";case 4:return"bg-blue-200";default:return"bg-white"}},G=(e,s)=>{const a=i[e][s],n=o==="complete",r=a===4;return t.jsx("div",{"data-row":e,"data-col":s,onClick:()=>E(e,s),className:`w-14 h-14 transition-all duration-200
          ${r&&p?"animate-[spin_0.6s_ease-in-out_1]":""}
          ${q(a)}
          ${a===4?"border-4 border-blue-500":"border-2 border-gray-300"}
          ${o==="playing"?"hover:border-blue-300 cursor-pointer":"cursor-not-allowed"}
          ${n&&x[e][s]===1?"bg-green-500 border-2 border-green-600":""}`})},P=e=>{const s=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${s}-${a}-${n}`},k=new Date;return k.setHours(0,0,0,0),t.jsxs("div",{className:"p-6 relative",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold ml-8",children:"Tiles"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("input",{type:"date",value:P(d),onChange:F,max:P(k),className:"border rounded px-2 py-1"}),t.jsx("button",{onClick:()=>D(!0),className:"p-2 text-gray-500 hover:text-gray-700",children:t.jsx(M,{className:"w-5 h-5"})})]})]}),t.jsx("div",{className:"grid grid-cols-4 gap-2 mb-6 mx-auto w-fit",children:[0,1,2,3].map(e=>t.jsx(I.Fragment,{children:[0,1,2,3].map(s=>t.jsx(I.Fragment,{children:G(e,s)},`${e}-${s}`))},e))}),t.jsxs("div",{className:"space-y-4",children:[S&&t.jsx("p",{className:`text-center mb-4 ${o==="complete"?"text-green-600 font-bold text-xl":"text-gray-600"}`,children:S}),o==="complete"&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("button",{onClick:Y,className:"w-full p-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors flex items-center justify-center gap-2",children:[t.jsx(O,{className:"w-4 h-4"})," Play Previous Day"]}),t.jsx("a",{href:"/daily-games/numbers",className:"block w-full p-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors text-center",children:"Try out today's Daily Number game"})]})]}),t.jsxs(R,{isOpen:T,onClose:()=>D(!1),title:"Welcome to Daily Tiles!",children:[t.jsx("p",{children:"Here's how to play:"}),t.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[t.jsx("li",{children:"There are 3 hidden tiles in the 4x4 grid"}),t.jsx("li",{children:"Select 3 tiles to make a guess"}),t.jsxs("li",{children:[t.jsx("span",{className:"text-yellow-500 font-bold",children:"Yellow"})," tiles means that at least one of the 3 tiles is correct"]}),t.jsxs("li",{children:[t.jsx("span",{className:"text-gray-500 font-bold",children:"Gray"})," tiles mean none of the 3 tiles were correct"]}),t.jsx("li",{children:"Keep guessing until you find all 3 tiles"}),t.jsx("li",{children:"You can play previous days' puzzles using the date selector"})]}),t.jsx("p",{children:"Good luck!"})]}),t.jsx(H,{gameName:"Tiles"})]})};export{z as default};
