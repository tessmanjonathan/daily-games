import{r as l,j as t,R as T}from"./index-B6zu9WnE.js";import{I as M,C as O,a as R,V as H}from"./Version-CPmIwkhv.js";const z=()=>{const[o,x]=l.useState("playing"),[g,b]=l.useState(0),[k,d]=l.useState(""),[u,S]=l.useState(()=>{const e=new Date;return e.setHours(0,0,0,0),e}),[i,m]=l.useState(Array(4).fill().map(()=>Array(4).fill(0))),[j,w]=l.useState(Array(4).fill().map(()=>Array(4).fill(0))),[F,v]=l.useState(()=>{const e=localStorage.getItem("gamesShowInstructions");return e===null?!0:JSON.parse(e)}),[h,p]=l.useState(!1),f=e=>{let r=e.getFullYear()*1e4+(e.getMonth()+1)*100+e.getDate();const a=()=>(r=r*16807%2147483647,(r-1)/2147483646),n=Array(4).fill().map(()=>Array(4).fill(0));let s=0;for(;s<3;){const c=Math.floor(a()*4),I=Math.floor(a()*4);n[c][I]===0&&(n[c][I]=1,s++)}return n},[y,N]=l.useState(f(u)),E=e=>{const r=new Date(e.target.value);S(r),N(f(r)),C()},D=l.useCallback(()=>{if(o!=="playing"||h)return;p(!0);let e=0;const r=[];for(let n=0;n<4;n++)for(let s=0;s<4;s++)i[n][s]===4&&(r.push([n,s]),y[n][s]===1&&e++);const a=[...i].map(n=>[...n]);setTimeout(()=>{p(!1),b(s=>s+1);const n=[...j].map(s=>[...s]);r.forEach(([s,c])=>{e===3?(x("complete"),d(`Congratulations, you solved TILES for ${u.toLocaleDateString()} in ${g+1} ${g===0?"attempt":"attempts"}!`)):e===0?(a[s][c]=1,n[s][c]=1):(a[s][c]=3,n[s][c]=3)}),w(n),m(a),e>0&&e<3?d(`${e} out of 3 squares are correct!`):e===0&&d("None of these squares are correct.")},650)},[o,i,y,g,u,h]);l.useEffect(()=>{(()=>{i.flat().filter(a=>a===4).length===3&&o==="playing"&&D()})()},[i,o,D]);const Y=(e,r)=>{if(o!=="playing")return;const a=[...i];if(a[e]=[...a[e]],a[e][r]===4)a[e][r]=j[e][r];else{if(a.flat().filter(s=>s===4).length>=3){d("You can only select 3 squares at a time");return}a[e][r]=4}m(a),d("")},C=()=>{x("playing"),m(Array(4).fill().map(()=>Array(4).fill(0))),w(Array(4).fill().map(()=>Array(4).fill(0))),d(""),b(0),p(!1)},q=()=>{const e=new Date(u);e.setDate(e.getDate()-1),S(e),N(f(e)),C()},P=(e,r=!1)=>{if(r)return"bg-green-500 dark:bg-green-500 border-2 border-green-600 dark:border-green-400";switch(e){case 1:return"bg-gray-300 dark:bg-gray-700";case 3:return"bg-yellow-300 dark:bg-yellow-500";case 4:return"bg-blue-200 dark:bg-blue-500/50";default:return"bg-white dark:bg-gray-800"}},G=(e,r)=>{const a=i[e][r],n=o==="complete",s=a===4;return t.jsx("div",{"data-row":e,"data-col":r,onClick:()=>Y(e,r),className:`
          w-14 h-14 transition-all duration-200
          ${s&&h?"animate-[spin_0.6s_ease-in-out_1]":""}
          ${n&&y[e][r]===1?P(a,!0):P(a)}
          ${a===4?"border-4 border-blue-500 dark:border-blue-400":"border-2 border-gray-300 dark:border-gray-600"}
          ${o==="playing"?"hover:border-blue-300 dark:hover:border-blue-400 cursor-pointer":"cursor-not-allowed"}
        `})},$=e=>{const r=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${r}-${a}-${n}`},A=new Date;return A.setHours(0,0,0,0),t.jsxs("div",{className:"p-6 relative",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold dark:text-white",children:"Tiles"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("input",{type:"date",value:$(u),onChange:E,max:$(A),className:`border rounded px-2 py-1 bg-white dark:bg-gray-700 dark:text-white dark:border-gray-600 
              focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 dark-mode-date
              [&::-webkit-calendar-picker-indicator]:dark:invert
              [&::-webkit-calendar-picker-indicator]:dark:opacity-70
              [&::-webkit-calendar-picker-indicator]:hover:cursor-pointer`}),t.jsx("button",{onClick:()=>v(!0),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:t.jsx(M,{className:"w-5 h-5"})})]})]}),t.jsx("div",{className:"grid grid-cols-4 gap-2 mb-6 mx-auto w-fit",children:[0,1,2,3].map(e=>t.jsx(T.Fragment,{children:[0,1,2,3].map(r=>t.jsx(T.Fragment,{children:G(e,r)},`${e}-${r}`))},e))}),t.jsxs("div",{className:"space-y-4",children:[k&&t.jsx("p",{className:`text-center mb-4 ${o==="complete"?"text-green-600 dark:text-green-400 font-bold text-xl":"text-gray-600 dark:text-gray-400"}`,children:k}),o==="complete"&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("button",{onClick:q,className:"w-full p-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors flex items-center justify-center gap-2",children:[t.jsx(O,{className:"w-4 h-4"})," Play Previous Day"]}),t.jsx("a",{href:"#numbers",className:"block w-full p-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors text-center",children:"Try out today's Daily Number game"})]})]}),t.jsxs(R,{isOpen:F,onClose:()=>v(!1),title:"Welcome to Daily Tiles!",children:[t.jsx("p",{children:"Here's how to play:"}),t.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[t.jsx("li",{children:"There are 3 hidden tiles in the 4x4 grid"}),t.jsx("li",{children:"Select 3 tiles to make a guess"}),t.jsxs("li",{children:[t.jsx("span",{className:"text-yellow-500 font-bold",children:"Yellow"})," tiles means that at least one of the 3 tiles is correct"]}),t.jsxs("li",{children:[t.jsx("span",{className:"text-gray-500 font-bold",children:"Gray"})," tiles mean none of the 3 tiles were correct"]}),t.jsx("li",{children:"Keep guessing until you find all 3 tiles"}),t.jsx("li",{children:"You can play previous days' puzzles using the date selector"})]}),t.jsx("p",{children:"Good luck!"})]}),t.jsx(H,{gameName:"Tiles"})]})};export{z as default};
