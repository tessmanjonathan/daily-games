import{r as l,j as t,R as P}from"./index-Dkb6AkJB.js";import{I as q,C as F,a as G,V as R}from"./Version-Dlc0-ITo.js";const U=()=>{const[i,y]=l.useState("playing"),[m,S]=l.useState(0),[b,c]=l.useState(""),[u,j]=l.useState(new Date),[o,p]=l.useState(Array(4).fill().map(()=>Array(4).fill(0))),[I,w]=l.useState(()=>{const e=localStorage.getItem("gamesShowInstructions");return e===null?!0:JSON.parse(e)}),[f,h]=l.useState(!1),g=e=>{let s=e.getFullYear()*1e4+(e.getMonth()+1)*100+e.getDate();const a=()=>(s=s*16807%2147483647,(s-1)/2147483646),n=Array(4).fill().map(()=>Array(4).fill(0));let r=0;for(;r<3;){const d=Math.floor(a()*4),D=Math.floor(a()*4);n[d][D]===0&&(n[d][D]=1,r++)}return n},[x,N]=l.useState(g(u)),$=e=>{const s=new Date(e.target.value);j(s),N(g(s)),v()},C=l.useCallback(()=>{if(i!=="playing"||f)return;h(!0);let e=0;const s=[];for(let n=0;n<4;n++)for(let r=0;r<4;r++)o[n][r]===4&&(s.push([n,r]),x[n][r]===1&&e++);const a=[...o].map(n=>[...n]);setTimeout(()=>{h(!1),S(n=>n+1),s.forEach(([n,r])=>{e===3?(y("complete"),c(`Congratulations, you solved TILES for ${u.toISOString().split("T")[0]} in ${m+1} ${m===0?"attempt":"attempts"}!`)):e===0?a[n][r]=1:a[n][r]=3}),p(a),e>0&&e<3?c(`${e} out of 3 squares are correct!`):e===0&&c("None of these squares are correct.")},650)},[i,o,x,m,u,f]);l.useEffect(()=>{(()=>{o.flat().filter(a=>a===4).length===3&&i==="playing"&&C()})()},[o,i,C]);const k=(e,s)=>{if(i!=="playing"||o[e][s]===1)return;const a=[...o];if(a[e]=[...a[e]],a[e][s]===4)a[e][s]=0;else{if(a.flat().filter(r=>r===4).length>=3){c("You can only select 3 squares at a time");return}a[e][s]=4}p(a),c("")},v=()=>{y("playing"),p(Array(4).fill().map(()=>Array(4).fill(0))),c(""),S(0),h(!1)},T=()=>{const e=new Date(u);e.setDate(e.getDate()-1),j(e),N(g(e)),v()},A=e=>{switch(e){case 1:return"bg-gray-300";case 3:return"bg-yellow-300";case 4:return"";default:return"bg-white"}},E=(e,s)=>{const a=o[e][s],n=i==="complete",r=a===4,d=a===1;return t.jsx("div",{"data-row":e,"data-col":s,onClick:()=>!d&&k(e,s),className:`w-14 h-14 transition-all duration-200
          ${r&&f?"animate-[spin_0.6s_ease-in-out_1]":""}
          ${A(a)}
          ${a===4?"border-4 border-blue-500":"border-2 border-gray-300"}
          ${!d&&i==="playing"?"hover:border-blue-300 cursor-pointer":"cursor-not-allowed"}
          ${n&&x[e][s]===1?"bg-green-500 border-2 border-green-600":""}`})},O=new Date().toISOString().split("T")[0];return t.jsxs("div",{className:"p-6 relative",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold ml-8",children:"Tiles"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("input",{type:"date",value:u.toISOString().split("T")[0],onChange:$,max:O,className:"border rounded px-2 py-1"}),t.jsx("button",{onClick:()=>w(!0),className:"p-2 text-gray-500 hover:text-gray-700",children:t.jsx(q,{className:"w-5 h-5"})})]})]}),t.jsx("div",{className:"grid grid-cols-4 gap-2 mb-6 mx-auto w-fit",children:[0,1,2,3].map(e=>t.jsx(P.Fragment,{children:[0,1,2,3].map(s=>t.jsx(P.Fragment,{children:E(e,s)},`${e}-${s}`))},e))}),t.jsxs("div",{className:"space-y-4",children:[b&&t.jsx("p",{className:`text-center mb-4 ${i==="complete"?"text-green-600 font-bold text-xl":"text-gray-600"}`,children:b}),i==="complete"&&t.jsxs("button",{onClick:T,className:"w-full p-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors flex items-center justify-center gap-2",children:[t.jsx(F,{className:"w-4 h-4"})," Play Previous Day"]})]}),t.jsxs(G,{isOpen:I,onClose:()=>w(!1),title:"How to Play",children:[t.jsx("p",{children:"Welcome to Daily Tiles! Here's how to play:"}),t.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[t.jsx("li",{children:"There are 3 hidden tiles in the 4x4 grid"}),t.jsx("li",{children:"Select 3 tiles to make a guess"}),t.jsxs("li",{children:[t.jsx("span",{className:"text-yellow-500 font-bold",children:"Yellow"})," tiles means that at least one of the 3 tiles is correct"]}),t.jsxs("li",{children:[t.jsx("span",{className:"text-gray-500 font-bold",children:"Gray"})," tiles mean none of the 3 tiles were correct"]}),t.jsx("li",{children:"Keep guessing until you find all 3 tiles"}),t.jsx("li",{children:"You can play previous days' puzzles using the date selector"})]}),t.jsx("p",{children:"Good luck!"})]}),t.jsx(R,{gameName:"Tiles"})]})};export{U as default};
